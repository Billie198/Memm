<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Matty's Ultimate Gem</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="/bootstrap.min.css" rel="stylesheet">
    <link href="/site.css" rel="stylesheet">

    <link rel="stylesheet" href="highlight.js/styles/default.css">
    <script src="highlight.js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <style type="text/css">#toc{float:right;background:#fff}#license{font:12px/14px normal 'Andale Mono',monospace;margin:1em 0;padding:12px;background:#d8d8d8;color:#000}h2{border:1px solid rgba(0,0,0,0.04);border-radius:5px;background:rgba(12,177,206,0.04);padding:0.1em}</style>
  </head>
  <body>
    <nav class="navbar navbar-default navbar-inverse navbar-fixed-top" role="navigation">
      <div class="navbar-header">
        <a class="navbar-brand" href="/">phluid61</a>
      </div>
      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <li>
            <a href="https://github.com/phluid61/">Repositories</a>
          </li>
          <li class="dropdown">
            <a href="/internet-drafts/" class="dropdown-toggle" data-toggle="dropdown">Internet Drafts<b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="/internet-drafts/">Internet Drafts Index</a></li>
              <li class="divider"></li>
              <li><a href="/internet-drafts/file-scheme/">file URI Scheme</a></li>
              <li><a href="/internet-drafts/http2-encoded-data/">HTTP/2 Encoded Data</a></li>
              <li><a href="/internet-drafts/http2-nak-frame/">HTTP/2 "Dropped Frame" Frame</a></li>
              <li><a href="/internet-drafts/http2-segments/"><s>HTTP/2 Segments</s></a></li>
            </ul>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Web Stuff<b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="/ruby-h2/">ruby-h2</a></li>
              <li><a href="/mk-hpack/">mk-hpack</a></li>
              <li><a href="/http2-experimental/">HTTP/2 Experiments</a></li>
            </ul>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Ruby Gems<b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="/mug/">Matty's Ultimate Gem</a></li>
              <li><a href="/symbol_lookup-gem/">Symbol[]</a></li>
              <li><a href="/timestamp-gem/">Time.timestamp</a></li>
              <li><a href="/file-uri/">file-uri</a></li>
              <li><a href="/hashmap-gem/">hashmap</a></li>
              <li><a href="/memory-profiler-gem/">MemoryProfiler</a></li>
              <li><a href="/threadpuddle-gem/">ThreadPuddle</a></li>
              <li><a href="/try_convert/">try_convert</a></li>
              <li><a href="/to_h-gem/">to_h</a></li>
              <li><a href="/tauday-gem/">tauday</a></li>
            </ul>
          </li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="https://twitter.com/phluid61"><img src="/twitter.png" width="28" height="28"></a>
          </li>
          <li>
            <a href="https://plus.google.com/+MatthewKerwin"><img src="/google+.png" width="28" height="28"></a>
          </li>
        </ul>
      </div>
      </nav>
      <div class="container">
        <div class="page-header">
          <h1>phluid61</h1>
        </div>
<div id="toc"><ul><li><a href="#gem-alias">alias</a></li><li><a href="#gem-and-or">and-or</a></li><li><a href="#gem-any-and-all">any-and-all</a></li><li><a href="#gem-apply">apply</a></li><li><a href="#gem-array/delete_all">array/delete_all</a></li><li><a href="#gem-array/extend">array/extend</a></li><li><a href="#gem-array/minus">array/minus</a></li><li><a href="#gem-array/samples">array/samples</a></li><li><a href="#gem-bittest">bittest</a></li><li><a href="#gem-bool">bool</a></li><li><a href="#gem-clamp">clamp</a></li><li><a href="#gem-counts">counts</a></li><li><a href="#gem-fragile-method-chain">fragile-method-chain</a></li><li><a href="#gem-hash/map">hash/map</a></li><li><a href="#gem-hash/merge">hash/merge</a></li><li><a href="#gem-hash/operations">hash/operations</a></li><li><a href="#gem-hash/when">hash/when</a></li><li><a href="#gem-iterator/for">iterator/for</a></li><li><a href="#gem-iterator/method">iterator/method</a></li><li><a href="#gem-loop-with">loop-with</a></li><li><a href="#gem-matchdata/each">matchdata/each</a></li><li><a href="#gem-matchdata/hash">matchdata/hash</a></li><li><a href="#gem-maybe">maybe</a></li><li><a href="#gem-negativity">negativity</a></li><li><a href="#gem-not">not</a></li><li><a href="#gem-rexproc">rexproc</a></li><li><a href="#gem-self">self</a></li><li><a href="#gem-tau">tau</a></li><li><a href="#gem-time">time</a></li><li><a href="#gem-to_h">to_h</a></li><li><a href="#gem-top">top</a></li></ul></div><h1>Matty&#39;s Ultimate Gem</h1>

<p><a href="http://travis-ci.org/phluid61/mug"><img src="https://secure.travis-ci.org/phluid61/mug.png" alt="Build Status"></a><br>
<a href="http://badge.fury.io/rb/mug"><img src="https://badge.fury.io/rb/mug.png" alt="Gem Version"></a></p>

<h2 id="gem-alias">alias</h2>

<h3>Module</h3>

<h4><code>alias_singleton_method(new_name, old_name) =&gt; self</code></h4>

<p>Makes <em>new_name</em> a new copy of the instance method <em>old_name</em>.  This can be used to retain access to instance methods that are overridden.</p>

<h4>Examples</h4>

<pre lang="ruby"><code>require &#39;mug/alias&#39;

module Mod
  def self.foo
    1
  end
  alias_instance_method :bar, :foo
  def self.foo
    2
  end
end
Mod.foo #=&gt; 2
Mod.bar #=&gt; 1
</code></pre>

<h2 id="gem-and-or">and-or</h2>

<h3>Object</h3>

<h4><code>obj.and default</code><br><code>obj.and default {|o| block }</code></h4>

<p>Returns either <em>obj</em> or <em>default</em>, depending on the falsiness of <em>obj</em>.</p>

<p>If a block is given, <em>obj</em> is yielded to it; if it returns truthy, <em>default</em> is returned, otherwise <em>obj</em> is returned.</p>

<h4><code>obj.or default</code><br><code>obj.or default {|o| block }</code></h4>

<p>Returns either <em>obj</em> or <em>default</em>, depending on the truthiness of <em>obj</em>.</p>

<p>If a block is given, <em>obj</em> is yielded to it; if it returns truthy, <em>obj</em> is returned, otherwise <em>default</em> is returned.</p>

<h4><code>obj.and_then {|o| block }</code></h4>

<p>Calls <em>block</em> if <em>obj</em> is truthy.</p>

<p>Returns <em>obj</em>.</p>

<h4><code>obj.or_then {|o| block }</code></h4>

<p>Calls <em>block</em> if <em>obj</em> is falsey.</p>

<p>Returns <em>obj</em>.</p>

<h4>Examples</h4>

<pre lang="ruby"><code>require &#39;mug/and-or&#39;

data_store.get_env_hash.or(default_hash).do_something

get_a_list.and(default_list, &amp;:empty?).do_something

try_thing.and_then {|result| log &quot;got #{result.inspect}&quot; }
try_thing.or_then { log &quot;failed&quot; }
</code></pre>

<h2 id="gem-any-and-all">any-and-all</h2>

<h3>Enumerable</h3>

<h4><code>enum.any_and_all? {|obj| block }</code></h4>

<p>Passes each element of the collection to the given block. The method returns <code>true</code> if the<br>
block contains elements that never return <code>false</code> or <code>nil</code>. If the block is not given, Ruby<br>
adds an implicit block of <code>{ |obj| obj }</code> which will cause <code>any_and_all?</code> to return <code>true</code><br>
when none of the collection members are <code>false</code> or <code>nil</code>.</p>

<h2 id="gem-apply">apply</h2>

<h3>Proc</h3>

<h4><code>proc.apply *args</code></h4>

<p>Curries this Proc and partially applies parameters.<br>
If a sufficient number of arguments are supplied, it passes the<br>
supplied arguments to the original proc and returns the result.<br>
Otherwise, returns another curried proc that takes the rest of<br>
arguments.</p>

<h3>Method</h3>

<h4><code>meth.curry</code><br><code>meth.curry n</code></h4>

<p>Returns a curried proc. If the optional arity argument is given,<br>
it determines the number of arguments. A curried proc receives<br>
some arguments. If a sufficient number of arguments are supplied,<br>
it passes the supplied arguments to the original proc and returns<br>
the result. Otherwise, returns another curried proc that takes the<br>
rest of arguments.</p>

<h4><code>meth.apply *args</code></h4>

<p>Curries this Method and partially applies parameters.<br>
If a sufficient number of arguments are supplied, it passes the<br>
supplied arguments to the original proc and returns the result.<br>
Otherwise, returns another curried proc that takes the rest of<br>
arguments.</p>

<h2 id="gem-array/delete_all">array/delete_all</h2>

<h3>Array</h3>

<h4><code>array.delete_all {|item| block } =&gt; array</code><br><code>array.delete_all =&gt; Enumerator</code></h4>

<p>Deletes every element of <code>self</code> for which block evaluates to <code>true</code>.</p>

<p>Returns an array of the deleted elements.</p>

<p>If no block is given, an Enumerator is returned instead.</p>

<p>See #delete_if, #reject!</p>

<p><a href="https://bugs.ruby-lang.org/issues/13777">Feature #13777</a></p>

<h2 id="gem-array/extend">array/extend</h2>

<h3>Array</h3>

<h4><code>array.extend!(size=0, obj=nil)</code><br><code>array.extend!(array)</code><br><code>array.extend!(size) {|index| block }</code></h4>

<p>Extend this Array.</p>

<p>In the first form, when a <em>size</em> and an optional <em>obj</em> are sent,<br>
the array is extended with <em>size</em> copies of <em>obj</em>. Take notice that<br>
all elements will reference the same object <em>obj</em>.</p>

<p>The second form appends a copy of the array passed as a parameter<br>
(the array is generated by calling <code>#to_ary</code> on the parameter).<br>
See also: <code>#concat</code>, <code>#+</code></p>

<p>In the last form, the array is extended by the given size. Each new<br>
element in the array is created by passing the element&#39;s index to the<br>
given block and storing the return value.</p>

<h4><code>array.extend(size=0, obj=nil)</code><br><code>array.extend(array)</code><br><code>array.extend(size) {|index| block }</code></h4>

<p>See <code>#extend!</code></p>

<h2 id="gem-array/minus">array/minus</h2>

<h3>Array</h3>

<h4><code>array.minus(ary, remainder: false)</code></h4>

<p>Subtract elements from this array.</p>

<p>This is similar to <code>Array#-</code> except that elements from this array are<br>
removed only once per instance in <em>ary</em>.</p>

<p>If <em>remainder</em> is given and true, returns a second array which is<br>
all elements in <em>ary</em> that were not present in this array.</p>

<h2 id="gem-array/samples">array/samples</h2>

<h3>Array</h3>

<h4><code>array.samples(min: int, max: int, random: rng) =&gt; new_ary</code></h4>

<p>Choose a random subset of elements from the array.</p>

<p>The elements are chosen by using random and unique indices into the<br>
array in order to ensure that an element doesn&#39;t repeat itself<br>
unless the array already contained duplicate elements.</p>

<p>The optional <em>min</em> and <em>max</em> arguments restrict the size of the<br>
returned array.  <em>min</em> must be &gt;= 0, and <em>max</em> must be &gt;= <em>min</em>.<br>
(Both values are clamped to the size of the array.)</p>

<p>If the array is empty, always returns an empty array.</p>

<p>The optional <em>random</em> argument will be used as the random number<br>
generator.</p>

<h2 id="gem-bittest">bittest</h2>

<h3>Integer</h3>

<h4><code>int.and?(other, test: :any)</code></h4>

<p>Tests common bits in <em>this</em> AND <em>other</em>.</p>

<p>test:</p>

<ul>
<li><code>:any</code> =&gt; true if any bits are set</li>
<li><code>:all</code> =&gt; true if all bits are set</li>
</ul>

<h4><code>int.and_any?(other)</code></h4>

<p>True if <em>this</em> AND <em>other</em> is non-zero.</p>

<p>i.e. if any set bits in <em>other</em> are set in <em>this</em>.</p>

<h4><code>int.and_all?(other)</code></h4>

<p>True if <em>this</em> AND <em>other</em> is <em>other</em>.</p>

<p>i.e. if all set bits in <em>other</em> are set in <em>this</em>.</p>

<h4><code>int.or?(other)</code></h4>

<p>True if <em>this</em> OR <em>other</em> is non-zero.</p>

<h4><code>int.xor?(other)</code></h4>

<p>True if <em>this</em> XOR <em>other</em> is non-zero.</p>

<h2 id="gem-bool">bool</h2>

<h3>Kernel</h3>

<h4><code>Bool(obj)</code></h4>

<p>Returns the truthiness of <em>obj</em>, as either <em>True</em> or <em>False</em>.</p>

<p>This is functionally equivalent to calling <code>!!obj</code></p>

<h3>Object</h3>

<h4><code>obj.to_b</code></h4>

<p>Converts <em>obj</em> to a boolean using &quot;typical&quot; C-like conversion rules.</p>

<p>The following values all become false:</p>

<ul>
<li><code>0</code>, <code>0.0</code>, etc. (any numeric zero)</li>
<li><code>Float::NAN</code></li>
<li><code>&quot;&quot;</code></li>
<li><code>[]</code>, <code>{}</code>, etc. (any Enumerable or Enumerator with no elements)</li>
<li>any Exception</li>
</ul>

<p>All others values become true.</p>

<h4><code>obj.to_bool</code></h4>

<p>Returns the truthiness of <em>obj</em>, as either <em>True</em> or <em>False</em>.</p>

<p>This is functionally equivalent to calling <code>!!obj</code></p>

<h3>Examples</h3>

<pre lang="ruby"><code>require &#39;mug/bool&#39;

Bool(obj) #=&gt; !!obj
obj.to_bool #=&gt; !!obj
obj.to_b #=&gt; C-like truthiness
</code></pre>

<h2 id="gem-clamp">clamp</h2>

<p>Clamps a number to a range.</p>

<h3>Numeric</h3>

<h4><code>num.clamp lower, higher =&gt; new_num</code></h4>

<p>Clamps <em>num</em> so that <em>lower</em> &lt;= <em>new_num</em> &lt;= <em>higher</em>.</p>

<p>Returns <em>lower</em> when <em>num</em> &lt; <em>lower</em>, <em>higher</em> when <em>num</em> &gt; <em>higher</em>, otherwise<br>
<em>num</em> itself.</p>

<p>Raises an exception if <em>lower</em> &gt; <em>higher</em></p>

<h4><code>num.clamp range =&gt; new_num</code></h4>

<p>Effectively calls range#bound</p>

<h3>Range</h3>

<h4><code>rng.bound val =&gt; new_val</code></h4>

<p>Bounds val so that <em>first</em> &lt;= <em>new_val</em> &lt;= <em>last</em>.</p>

<p>Returns <em>first</em> when <em>val</em> &lt; <em>first</em>, <em>last</em> when <em>val</em> &gt; <em>last</em>, otherwise<br>
<em>val</em> itself.</p>

<p>Raises an exception if <em>val</em> &gt;= <em>end</em> and the range is exclusive.</p>

<h2 id="gem-counts">counts</h2>

<p>Returns counts of objects in enumerables.</p>

<h3>Enumerable</h3>

<h4><code>enum.counts</code></h4>

<p>Returns a hash of <code>item=&gt;count</code> showing how many<br>
of each <em>item</em> are in this Enumerable.</p>

<h4><code>enum.counts_by {|item| block }</code></h4>

<p>Passes each element in turn to the block, and returns a<br>
hash of <code>result=&gt;count</code>.</p>

<p>If no block is given, an enumerator is returned.</p>

<h3>Examples</h3>

<pre lang="ruby"><code>require &#39;mug/counts&#39;

%w(a b b).counts                   #=&gt; {&#39;a&#39;=&gt;1, &#39;b&#39;=&gt;2}
%w(a b b).counts_by{|o| o.upcase } #=&gt; {&#39;A&#39;=&gt;1, &#39;B&#39;=&gt;2}
</code></pre>

<h2 id="gem-fragile-method-chain">fragile-method-chain</h2>

<p>Defines a fragile method chain.  If any method call in the chain returns a falsy value, the chain aborts.</p>

<pre lang="ruby"><code>require &#39;mug/fragile-method-chain&#39;

# Similar to: a.b &amp;&amp; a.b.c
# except that a.b is not called twice
a._?.b.c._!

# Also works with #[] method
nested_hash._?[:a][:b][:c]._!
</code></pre>

<h2 id="gem-hash/map">hash/map</h2>

<h3>Hash</h3>

<h4><code>hsh.map_values {|v| block }</code></h4>

<p>Returns a new hash which is a copy of <em>hsh</em> but each value is replaced by the result of running it through <em>block</em>.</p>

<pre lang="ruby"><code>require &#39;mug/hash/map&#39;

{&#39;a&#39;=&gt;1, &#39;b&#39;=&gt;2}.map_values { |v| v*2 } #=&gt; {&#39;a&#39;=&gt;2, &#39;b&#39;=&gt;4}
{&#39;a&#39;=&gt;1, &#39;b&#39;=&gt;2}.map_values { &quot;cat&quot; }   #=&gt; {&#39;a&#39;=&gt;&quot;cat&quot;, &#39;b&#39;=&gt;&quot;cat&quot;}
</code></pre>

<h4><code>hsh.map_keys {|k| block }</code></h4>

<p>Returns a new hash which is a copy of <em>hsh</em> but each key is replaced by the result of running it through <em>block</em>.</p>

<p>If <em>block</em> returns duplicate keys, they will be overwritten in the resulting hash.</p>

<pre lang="ruby"><code>require &#39;mug/hash/map&#39;

{&#39;a&#39;=&gt;1, &#39;b&#39;=&gt;2}.map_keys { |k| k*2 } #=&gt; {&#39;aa&#39;=&gt;1, &#39;bb&#39;=&gt;2}
{&#39;a&#39;=&gt;1, &#39;b&#39;=&gt;2}.map_keys { &quot;cat&quot; }   #=&gt; {&#39;cat&#39;=&gt;2}
</code></pre>

<h4><code>hsh.map_pairs {|k, v| block }</code></h4>

<p>Returns a new hash which is a copy of <em>hsh</em> but each key-value pair is replaced by the result of running it through <em>block</em>.</p>

<p>If <em>block</em> returns duplicate keys, they will be overwritten in the resulting hash.</p>

<pre lang="ruby"><code>require &#39;mug/hash/map&#39;

{&#39;a&#39;=&gt;1, &#39;b&#39;=&gt;2}.map_pairs { |k,v| [k*2, v+1] } #=&gt; {&#39;aa&#39;=&gt;2, &#39;bb&#39;=&gt;3}
{&#39;a&#39;=&gt;1, &#39;b&#39;=&gt;2}.map_pairs { [&quot;cat&quot;,&quot;dog&quot;] }   #=&gt; {&#39;cat&#39;=&gt;&#39;dog&#39;}
</code></pre>

<h2 id="gem-hash/merge">hash/merge</h2>

<h3>Hash</h3>

<h4><code>hsh.merge_left other_hash =&gt; new_hash</code></h4>

<p>Returns a new hash containing the contents of <em>other_hash</em> and the<br>
contents of <em>hsh</em>. The value for each duplicate key is the value in<br>
<em>hsh</em> when it exists.</p>

<h4><code>hsh.merge_right other_hash =&gt; new_hash</code></h4>

<p>Returns a new hash containing the contents of <em>other_hash</em> and the<br>
contents of <em>hsh</em>. The value for each duplicate key is the value in<br>
<em>other_hash</em> when it exists.</p>

<h4><code>hsh.merge_left! other_hash =&gt; hsh</code></h4>

<p>Adds the contents of <em>other_hash</em> to <em>hsh</em>. Entries with duplicate<br>
keys are overwritten with the values from <em>other_hash</em> if the<br>
values in <em>hsh</em> are <em>nil</em>.</p>

<h4><code>hsh.merge_right! other_hash =&gt; hsh</code></h4>

<p>Adds the contents of <em>other_hash</em> to <em>hsh</em>. Entries with duplicate<br>
keys are overwritten with the values from <em>other_hash</em> unless the<br>
values in <em>other_hash</em> are <em>nil</em>.</p>

<h2 id="gem-hash/operations">hash/operations</h2>

<h3>Hash</h3>

<h4><code>hsh | other_hsh</code></h4>

<p>Returns a new Hash, whose value is the same as this<br>
one, with any extras in <em>other_hash</em> added in.</p>

<p>Useful for default options.</p>

<pre lang="ruby"><code>require &#39;mug/hash/operations&#39;

def foo options={}
  options | {b: 2, c: 2}
end
foo a: 1, b: 1 # =&gt; {:a=&gt;1, :b=&gt;1, :c=&gt;2}
</code></pre>

<h4><code>hsh + other_hsh</code></h4>

<p>Adds the contents of <em>other_hash</em> to <em>hsh</em>.<br>
Entries with duplicate keys are overwritten with the values from <em>other_hash</em></p>

<pre lang="ruby"><code>require &#39;mug/hash/operations&#39;

a = {a: 1, b: 1}
b = {b: 2, c: 2}
a + b # =&gt; {:a=&gt;1, :b=&gt;2, :c=&gt;2}
b + a # =&gt; {:a=&gt;1, :b=&gt;1, :c=&gt;2}
</code></pre>

<h4><code>hsh &lt;&lt; o</code></h4>

<p>Appends stuff to the hash.</p>

<ul>
<li>If <em>o</em> is a Hash, this is identical to calling #merge!</li>
<li>If <em>o</em> is an Array with two elements, it is interpreted as [key,value]</li>
<li>If <em>o</em> can be converted to a hash with #to_h, this is identical to calling #merge!</li>
<li>Otherwise an ArgumentError is raised.</li>
</ul>

<pre lang="ruby"><code>require &#39;mug/hash/operations&#39;

h = {}
h &lt;&lt; {:a=&gt;0}       # h = {:a=&gt;0}
h &lt;&lt; {:b=&gt;2,:c=&gt;3} # h = {:a=&gt;0,:b=&gt;2,:c=&gt;3}
h &lt;&lt; [:a,1]        # h = {:a=&gt;1,:b=&gt;2,:c=&gt;3}
</code></pre>

<h2 id="gem-hash/when">hash/when</h2>

<p>Use a Hash like a case statement.</p>

<pre lang="ruby"><code>case key
when /foo/ then &quot;FOO&quot;
when /bar/ then &quot;BAR&quot;
else &quot;DEFAULT&quot;
end
</code></pre>

<p>becomes:</p>

<pre lang="ruby"><code>h = {
  /foo/ =&gt; &quot;FOO&quot;,
  /bar/ =&gt; &quot;BAR&quot;,
}
h.default = &quot;DEFAULT&quot;
h[key]
</code></pre>

<h2 id="gem-iterator/for">iterator/for</h2>

<h3>Object</h3>

<h4><code>obj.iter_for(meth, *args)</code></h4>

<p>Creates an Iterator object, which is a subclass of Enumerator that recursively invokes a method on an object.</p>

<p>Initially the receiving object is <em>obj</em>.  After each iteration, the receiving object is replaced with the result of the previous iteration.</p>

<pre lang="ruby"><code>require &#39;mug/iterator/for&#39;

0.iter_for(:next).take(5) #=&gt; [0,1,2,3,4]
0.iter_for(:+,2).take(5) #=&gt; [0,2,4,6,8]
</code></pre>

<h2 id="gem-iterator/method">iterator/method</h2>

<h3>Method</h3>

<h4><code>meth.to_iter(*args)</code></h4>

<p>Creates an Iterator object, which is a subclass of Enumerator that recursively invokes <em>meth</em> on an object.</p>

<p>Initially the receiving object is the object on which <em>meth</em> is defined.  After each iteration, the receiving object is replaced with the result of the previous iteration.</p>

<pre lang="ruby"><code>require &#39;mug/iterator/method&#39;

0.method(:next).to_iter.take(5) #=&gt; [0,1,2,3,4]
0.method(:+).to_iter(2).take(5) #=&gt; [0,2,4,6,8]
</code></pre>

<h2 id="gem-loop-with">loop-with</h2>

<h3>Kernel</h3>

<h4><code>loop_with_index(offset=0) {|i| block }</code></h4>

<p>Repeatedly executes the block, yielding the current iteration<br>
count, which starts from <em>offset</em>. If no block is given, returns<br>
an Enumerator.</p>

<h4><code>loop_with_object(obj) {|o| block }</code></h4>

<p>Repeatedly executes the block, yielding an arbitrary object, <em>obj</em>.</p>

<h3>Examples</h3>

<pre lang="ruby"><code>require &#39;mug/loop-with&#39;

loop_with_index do |i|
  p i
  break
end

arr = loop_with_object([]) do |a|
  s = gets.chomp
  throw StopIteration if s.empty?
  a &lt;&lt; s
end
</code></pre>

<h2 id="gem-matchdata/each">matchdata/each</h2>

<h3>MatchData</h3>

<h4><code>md.each</code><br><code>md.each { |str| block }</code></h4>

<p>Iterates over each capture group in the MatchData object,<br>
including <code>$&amp;</code> (the entire matched string), yielding the<br>
captured string.</p>

<h4><code>md.each_capture</code><br><code>md.each_capture {|key, str| block }</code></h4>

<p>Iterates over each capture group in the MatchData object,<br>
yielding the capture position and captured string.</p>

<p>The capture positions are either all Strings or all Integers,<br>
depending on whether the original Regexp had named capture<br>
groups or not.</p>

<h4><code>md.each_named_capture</code><br><code>md.each_named_capture {|name, str| block }</code></h4>

<p>Iterates over each named capture group in the MatchData object,<br>
yielding the capture name and string.</p>

<h4><code>md.each_positional_capture(include_names: false)</code><br><code>md.each_positional_capture(include_names: false) {|name, str| block }</code></h4>

<p>Iterates over each positional capture group in the MatchData object,<br>
yielding the capture position and string.</p>

<p>If <code>include_names</code> is given and true, treats named captures<br>
as positional captures.</p>

<p>WARNING: if mixing named and positional captures, no positional<br>
captures will be available using this method!</p>

<h2 id="gem-matchdata/hash">matchdata/hash</h2>

<h3>MatchData</h3>

<h4><code>md.to_h</code></h4>

<p>Returns a Hash object of capture position =&gt; captured string.</p>

<p>The capture positions are either all Strings or all Integers,<br>
depending on whether the original Regexp had named capture<br>
groups or not.</p>

<h4><code>md.named_captures</code></h4>

<p>Returns a Hash object of capture name =&gt; captured string.</p>

<h4><code>md.positional_captures(include_names: false)</code></h4>

<p>Returns a Hash object of capture position =&gt; captured string.</p>

<p>If <code>include_names</code> is given and true, treats named captures<br>
as positional captures.</p>

<p>WARNING: if mixing named and positional captures, no positional<br>
captures will be available using this method!</p>

<h2 id="gem-maybe">maybe</h2>

<h3>Object</h3>

<h4><code>obj.maybe</code><br><code>obj.maybe { block }</code></h4>

<p>Invokes a method on <em>obj</em> iff <em>obj</em> is truthy, otherwise returns <em>obj</em>.</p>

<p>When a block is given, the block is invoked in the scope of <em>obj</em> (i.e. <code>self</code> in the block refers to <em>obj</em>).</p>

<p>When no block is given, <em>maybe</em> returns an object to conditionally delegates methods to <em>obj</em>.</p>

<pre lang="ruby"><code>require &#39;mug/maybe&#39;

# Equivalent to: a &amp;&amp; a.b &amp;&amp; a.b.c
# except that a and b are only invoked once

# (block form)
a.maybe{ b.maybe{ c } }

# (delegator form)
a.maybe.b.maybe.c
</code></pre>

<h2 id="gem-negativity">negativity</h2>

<h3>Numeric</h3>

<h4><code>num.negative?</code></h4>

<p>If <em>num</em> is negative (i.e. &lt; 0), returns itself, otherwise returns <em>nil</em>.</p>

<h4><code>num.positive?</code></h4>

<p>If <em>num</em> is positive (i.e. &gt; 0), returns itself, otherwise returns <em>nil</em>.</p>

<h4><code>num.nonnegative?</code></h4>

<p>If <em>num</em> is nonnegative (i.e. &gt;= 0), returns itself, otherwise returns <em>nil</em>.</p>

<h4><code>num.nonpositive?</code></h4>

<p>If <em>num</em> is nonpositive (i.e. &lt;= 0), returns itself, otherwise returns <em>nil</em>.</p>

<h3>Examples</h3>

<pre lang="ruby"><code>require &#39;mug/negativity&#39;

if i.negative?
  puts &quot;#{i} = 0 - #{-i}&quot;
end

n.positive? or raise(&#39;not enough items&#39;)

x.nonnegative? || -x

arr.map{|i| i.nonpositive? }.compact
</code></pre>

<h2 id="gem-not">not</h2>

<h3>Kernel</h3>

<h4><code>obj.not</code><br><code>obj.not {|o| block }</code><br><code>obj.not(*a)</code><br><code>obj.not(*a) {|o| block }</code></h4>

<p>Negate a predicate.</p>

<h3>Examples</h3>

<pre lang="ruby"><code>require &#39;mug/not&#39;

false.not        #=&gt; true
true.not         #=&gt; false

[].not &amp;:empty?  #=&gt; false
[1].not :empty?  #=&gt; true

[1,-2,3].not(:all?) {|e| e &gt; 0 } #=&gt; true
</code></pre>

<h2 id="gem-rexproc">rexproc</h2>

<h3>Regexp</h3>

<h4><code>rex.to_proc</code></h4>

<p>Returns a proc that accepts one argument, that matches against this regexp object.</p>

<pre lang="ruby"><code>require &#39;mug/rexproc&#39;

%w[foo bar baz].select &amp;/\Ab/ #=&gt; [&quot;bar&quot;, &quot;baz&quot;]
%w[foo bar baz].reject &amp;/\Ab/ #=&gt; [&quot;foo&quot;]
%w[foo bar baz].find &amp;/\Ab/ #=&gt; &quot;bar&quot;
</code></pre>

<h2 id="gem-self">self</h2>

<h3>Object</h3>

<h4><code>obj.self</code><br><code>obj.self {|o| block }</code><br><code>obj.itself</code><br><code>obj.itself {|o| block }</code></h4>

<p>When a block is given, yields <em>obj</em> to the block and returns the resulting value.</p>

<p>When no block is given, simply returns <em>obj</em>.</p>

<blockquote>
<p>Note: this is different from <code>#tap</code> because <code>obj.tap{nil}</code> returns <em>obj</em>, but <code>obj.self{nil}</code> returns <em>nil</em>.</p>
</blockquote>

<pre lang="ruby"><code>require &#39;mug/self&#39;

1.self #=&gt; 1
obj.self #=&gt; obj
2.self{|i| i*3 } #=&gt; 6
[1,1,2,2,3].group_by(&amp;:self) #=&gt; {1=&gt;[1,1], 2=&gt;[2,2], 3=&gt;[3]}

1.itself #=&gt; 1
obj.itself #=&gt; obj
2.itself{|i| i*3 } #=&gt; 6
[1,1,2,2,3].group_by(&amp;:itself) #=&gt; {1=&gt;[1,1], 2=&gt;[2,2], 3=&gt;[3]}
</code></pre>

<h4><code>obj.revapply(*args) {|*list| block }</code><br><code>obj.cede(*args) {|*list| block }</code><br><code>obj.revapply(*args)</code><br><code>obj.cede(*args)</code></h4>

<p>When a block is given, yields <em>obj</em> and any <em>args</em> to the block and returns the resulting value.</p>

<p>When no block is given, returns an Enumerator.</p>

<h2 id="gem-tau">tau</h2>

<p>Defines the true circle constant.</p>

<pre lang="ruby"><code>Math::TAU #= 6.283185307179586..
</code></pre>

<p>Additionally it expands the BigDecimal/BigMath module:</p>

<pre lang="ruby"><code>require &#39;bigdecimal&#39;
require &#39;bigdecimal/math&#39;
include BigMath

puts TAU(15)
</code></pre>

<p>See <a href="http://tauday.com">http://tauday.com</a> to find out what it&#39;s all about.</p>

<h2 id="gem-time">time</h2>

<h3>Time</h3>

<h4><code>t.to_now</code></h4>

<p>Returns the number of seconds since the time represented by<br>
this Time object.</p>

<pre lang="ruby"><code>start = Time.now
#...
duration = start.to_now
</code></pre>

<h4><code>t.from_now</code></h4>

<p>Returns the number of seconds until the time represented by<br>
this Time object.</p>

<pre lang="ruby"><code>target = Time.new 2017, 1, 1, 0, 0, 0
sleep target.from_now
</code></pre>

<h4><code>Time.until t</code></h4>

<p>Returns the number of seconds until <code>t</code>.</p>

<h4><code>Time.since t</code></h4>

<p>Returns the number of seconds since <code>t</code>.</p>

<h2 id="gem-to_h">to_h</h2>

<p><strong>Removed</strong></p>

<blockquote>
<p>Note: for Ruy 2.1, <code>Enumerable#to_h</code> <a href="http://ruby-doc.org/core-2.1.0/Enumerable.html#method-i-to_h">is already defined</a>.</p>

<p>Note: for Ruby &lt;2.0, it is advisable to instead use the <a href="https://rubygems.org/gems/to_h"><em>to_h</em> gem</a>.</p>
</blockquote>

<h2 id="gem-top">top</h2>

<h3>Enumerable</h3>

<h4><code>enum.top(n=1)</code><br><code>enum.top(n=1) {|a,b| block }</code></h4>

<p>Get the top <em>n</em> items, in order from top to bottom.</p>

<p>Returns an <em>Array</em> even when <em>n</em> is 1.</p>

<p>See: <code>Enumerable#sort</code></p>

<h4><code>enum.top_by(n=1) {|item| block }</code></h4>

<p>Get the top <em>n</em> items, in order from top to bottom, ordered<br>
by mapping the values through the given block.</p>

<p>Returns an <em>Array</em> even when <em>n</em> is 1. Values that are tied<br>
after mapping are returned in the initial order.</p>

<p>If no block is given, an enumerator is returned instead.</p>

<p>See: <code>Enumerable#sort_by</code></p>

<h4><code>enum.bottom(n=1)</code><br><code>enum.bottom(n=1) {|a,b| block }</code></h4>

<p>Get the bottom <em>n</em> items, in order from bottom to top.</p>

<p>Returns an <em>Array</em> even when <em>n</em> is 1.</p>

<p>See: <code>Enumerable#sort</code></p>

<h4><code>enum.bottom_by(n=1) {|item| item }</code></h4>

<p>Get the bottom <em>n</em> items, in order from bottom to top, ordered<br>
by mapping the values through the given block.</p>

<p>Returns an <em>Array</em> even when <em>n</em> is 1. Values that are tied<br>
after mapping are returned in the initial order.</p>

<p>If no block is given, an enumerator is returned instead.</p>

<p>See: <code>Enumerable#sort_by</code></p>
<pre id="license" class="no-highlight">Copyright (c) 2013-2015, Matthew Kerwin <matthew@kerwin.net.au>Permission to use, copy, modify, and/or distribute this software for anypurpose with or without fee is hereby granted, provided that the abovecopyright notice and this permission notice appear in all copies.THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIESWITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OFMERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FORANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGESWHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN ANACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OFOR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
</pre><h1>Contributor Covenant Code of Conduct</h1>

<h2>Our Pledge</h2>

<p>In the interest of fostering an open and welcoming environment, we as<br>
contributors and maintainers pledge to making participation in our<br>
project and our community a harassment-free experience for everyone,<br>
regardless of age, body size, disability, ethnicity, gender identity<br>
and expression, level of experience, nationality, personal appearance,<br>
race, religion, or sexual identity and orientation.</p>

<h2>Our Standards</h2>

<p>Examples of behavior that contributes to creating a positive<br>
environment include:</p>

<ul>
<li>Using welcoming and inclusive language</li>
<li>Being respectful of differing viewpoints and experiences</li>
<li>Gracefully accepting constructive criticism</li>
<li>Focusing on what is best for the community</li>
<li>Showing empathy towards other community members</li>
</ul>

<p>Examples of unacceptable behavior by participants include:</p>

<ul>
<li>The use of sexualized language or imagery and unwelcome sexual
attention or advances</li>
<li>Trolling, insulting/derogatory comments, and personal or political
attacks</li>
<li>Public or private harassment</li>
<li>Publishing others&#39; private information, such as a physical or
electronic address, without explicit permission</li>
<li>Other conduct which could reasonably be considered inappropriate in a
professional setting</li>
</ul>

<h2>Our Responsibilities</h2>

<p>Project maintainers are responsible for clarifying the standards of<br>
acceptable behavior and are expected to take appropriate and fair<br>
corrective action in response to any instances of unacceptable behavior.</p>

<p>Project maintainers have the right and responsibility to remove, edit,<br>
or reject comments, commits, code, wiki edits, issues, and other<br>
contributions that are not aligned to this Code of Conduct, or to ban<br>
temporarily or permanently any contributor for other behaviors that they<br>
deem inappropriate, threatening, offensive, or harmful.</p>

<h2>Scope</h2>

<p>This Code of Conduct applies both within project spaces and in public<br>
spaces when an individual is representing the project or its community.<br>
Examples of representing a project or community include using an<br>
official project e-mail address, posting via an official social media<br>
account, or acting as an appointed representative at an online or<br>
offline event.  Representation of a project may be further defined and<br>
clarified by project maintainers.</p>

<h2>Enforcement</h2>

<p>Instances of abusive, harassing, or otherwise unacceptable behavior may<br>
be reported by contacting the project team at <a href="mailto:matthew@kerwin.net.au">matthew@kerwin.net.au</a>.<br>
All complaints will be reviewed and investigated and will result in a<br>
response that is deemed necessary and appropriate to the circumstances.<br>
The project team is obligated to maintain confidentiality with regard to<br>
the reporter of an incident. Further details of specific enforcement<br>
policies may be posted separately.</p>

<p>Project maintainers who do not follow or enforce the Code of Conduct in<br>
good faith may face temporary or permanent repercussions as determined<br>
by other members of the project&#39;s leadership.</p>

<h2>Attribution</h2>

<p>This Code of Conduct is adapted from the <a href="http://contributor-covenant.org">Contributor Covenant</a>,<br>
version 1.4, available at <a href="http://contributor-covenant.org/version/1/4">http://contributor-covenant.org/version/1/4</a></p>
      </div>
      <script src="/jquery.min.js"></script>
      <script src="/bootstrap.min.js"></script>
  </body>
</html>
